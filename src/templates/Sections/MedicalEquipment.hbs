{{#with (getFirstCdaSectionsWithExactMatch msg 'Medical Equipment')}}
    {{#each (toArray Medical_Equipment.entry)}}
        {{#if this.organizer}}
        {{>Resources/Device2.hbs deviceEntry=this.organizer ID=(generateUUID (toJsonString this.organizer))}},
            {{#each (toArray this.organizer.component) as |medequipEntry|}}
                {{>Resources/Device2.hbs deviceEntry=medequipEntry.supply ID=(generateUUID (toJsonString medequipEntry.supply))}},
            {{/each}}
        {{/if}}
        
        {{#if this.supply}}
            {{>Resources/Device2.hbs deviceEntry=this.supply ID=(generateUUID (toJsonString this.supply))}},
        {{/if}}
        
        {{#if this.procedure}}
            {{>Resources/Procedure.hbs procedureEntry=this.procedure ID=(generateUUID (toJsonString this.procedure))}},
            {{>Resources/Organization.hbs org=this.procedure.performer.assignedEntity.representedOrganization ID=(generateUUID (toJsonString this.procedure.performer.assignedEntity.representedOrganization))}},
            {{>References/Procedure/performer.actor.hbs ID=(generateUUID (toJsonString this.procedure)) REF=(concat 'Organization/' (generateUUID (toJsonString this.procedure.performer.assignedEntity.representedOrganization)))}},
        {{/if}}
        
    {{/each}}
{{/with}}    